# ä½¿ç”¨ React æŒ‚é’©è¿›è¡Œ React è¯­éŸ³è¯†åˆ«

> åŸæ–‡:[https://www . assembly ai . com/blog/react-speech-recognition-with-react-hooks/](https://www.assemblyai.com/blog/react-speech-recognition-with-react-hooks/)

è¯­éŸ³è¯†åˆ«å·²ç»æˆä¸ºä¸€ä¸ªçƒ­é—¨è¯é¢˜æœ‰ä¸€æ®µæ—¶é—´äº†ã€‚å®ƒæœ‰è®¸å¤šä½¿ç”¨æ¡ˆä¾‹ï¼Œè€Œä¸”éœ€æ±‚è¿˜åœ¨å¢é•¿ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ AssemblyAI çš„è¯­éŸ³åˆ°æ–‡æœ¬ API å’Œ React æŒ‚é’©åˆ›å»º React è¯­éŸ³è¯†åˆ«åº”ç”¨ç¨‹åºã€‚

## ä½æ–™

*   ååº”^17.0.2
*   è½´^0.26.1
*   éº¦å…‹é£-å½•éŸ³æœº-mp3 ^2.2.2
*   ååº”-è£…è½½-æ—‹è½¬^6.0.0-0
*   **éšæ„**åšå‡ºäº‹æƒ…**ğŸ¦„**
*   ^3.0.23 é¡ºé£ç¤¾
*   ^2.8.0 å¤§ç§€

## æˆ‘ä»¬åœ¨å»ºé€ ä»€ä¹ˆï¼Ÿ

åœ¨è¿™ä¸ª React è¯­éŸ³è¯†åˆ«æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒå¯ä»¥è®°å½•æ‚¨å¯¹éº¦å…‹é£è¯´è¯çš„éŸ³é¢‘ï¼Œå¹¶è‡ªåŠ¨å°†éŸ³é¢‘è½¬å½•ä¸ºæ–‡æœ¬ã€‚æ ·å¼æ˜¯å®Œå…¨å¯é€‰çš„ï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„ [Github åº“](https://github.com/stefanrows/react-speech-recognition-app)ä¸­ä¸ºæ‚¨æä¾›å¸¦æœ‰æ ·å¼çš„å®Œæ•´ä»£ç ã€‚

æˆ‘ä»¬å¸Œæœ›ä¸»æ•™ç¨‹ä¿æŒæœ€å°åŒ–ï¼Œä¸è¦è®©æ··ä¹±çš„é£æ ¼å µå¡ä»£ç ã€‚ä¸‹é¢åªæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æ·»åŠ æ ·å¼ï¼Œå®ƒä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œä¸€çª¥å®Œæˆåçš„åº”ç”¨ç¨‹åºçš„æ ·å­[ã€‚](https://react-speech-recognition-aai.netlify.app/)

![React Speech Recognition](../Images/90659c7b601e6a0392a84a968ac73ff4.png)

## æ­¥éª¤ 1 -åˆ›å»ºæ–°çš„ React åº”ç”¨ç¨‹åº

å¦‚æœæ‚¨ä»¥å‰ä½¿ç”¨è¿‡ Reactï¼Œæ‚¨åº”è¯¥å¯¹è¿™ä¸ªç»å…¸è¿‡ç¨‹å¾ˆç†Ÿæ‚‰ã€‚

```
npx create-react-app@latest react-speech-recognition-app
cd react-speech-recognition-app
code . 
```

![React Speech Recognition](../Images/d5a5822f8baedcaf0b64fc6e502fc750.png)

## ç¬¬äºŒæ­¥-æ¸…ç†

ä» **/src** ä¸­åˆ é™¤ **App.css** ã€ **App.test.js** ã€ **logo.svg** ã€ **reportWebVitals.js** å’Œ **setupTests.js**

åˆ é™¤ **App.js** ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤º

```
function App() {
  return <div></div>
}

export default App 
```

ä» **index.js** ä¸­ç§»é™¤`reportWebVitals();`åŠå…¶å¯¼å…¥

åˆ é™¤ **index.css** ä¸­çš„æ‰€æœ‰å†…å®¹

## æ­¥éª¤ 3 -å®‰è£…ä¾èµ–é¡¹

è®©æˆ‘ä»¬å…ˆæŠŠå®‰è£…éƒ¨åˆ†è§£å†³æ‰ã€‚æˆ‘å°†åŒ…æ‹¬æ ·å¼ä¾èµ–â€”â€”æ‚¨å¯ä»¥é€‰æ‹©çœç•¥å®ƒä»¬ã€‚

### æ ¸å¿ƒä¾èµ–å…³ç³»

```
npm install react-loader-spinner --save
npm install mic-recorder-to-mp3 --save
npm install axios --save 
```

### æ ·å¼ä¾èµ–å…³ç³»

å¯¹äºé¡ºé£ CSSï¼Œä»**æ­¥éª¤ 2** åˆ°**æ­¥éª¤ 4** éµå¾ªè¿™äº›æ­¥éª¤[ã€‚](https://tailwindcss.com/docs/guides/create-react-app)

å¯¹äº DaisyUIï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ã€‚

## æ­¥éª¤ 4 -è®¾ç½®æˆ‘ä»¬çš„å½•éŸ³æœº

ä¸ºäº†èƒ½å¤Ÿåˆ›å»ºæ•´ä¸ª React è¯­éŸ³è¯†åˆ«åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸€ç§è®°å½•éŸ³é¢‘æ–‡ä»¶çš„æ–¹æ³•ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¹‹å‰å®‰è£…çš„**éº¦å…‹é£å½•éŸ³è½¬ mp3** npm åŒ…ã€‚

è®©æˆ‘ä»¬ä»å¯¼å…¥ä¸€äº›ä¸œè¥¿å¼€å§‹ï¼Œæ·»åŠ ä¸€äº›æŒ‰é’®å’Œæˆ‘ä»¬çš„éŸ³é¢‘æ’­æ”¾å™¨ã€‚

```
import MicRecorder from "mic-recorder-to-mp3"
import { useEffect, useState, useRef } from "react"
import axios from "axios"

const App = () => {
  return (
    <div>
      <h1>React Speech Recognition App</h1>
      <audio controls='controls' />
      <div>
        <button>START</button>
        <button>STOP</button>
        <button>SUBMIT</button>
      </div>
    </div>
  )
}

export default App 
```

å®ƒåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·

![React Speech Recognition](../Images/b90f589b140bc384e511f29d922478a7.png)

### å½•éŸ³æœºé€»è¾‘

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€äº›çŠ¶æ€ï¼Œå¹¶åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ ä¸€äº›ä»£ç ã€‚ä¸‹é¢æˆ‘æ¥è§£é‡Šã€‚

```
import MicRecorder from "mic-recorder-to-mp3"
import { useEffect, useState, useRef } from "react"
import axios from "axios"

const App = () => {
  // Mic-Recorder-To-MP3
  const recorder = useRef(null) //Recorder
  const audioPlayer = useRef(null) //Ref for the HTML Audio Tag
  const [blobURL, setBlobUrl] = useState(null)
  const [audioFile, setAudioFile] = useState(null)
  const [isRecording, setIsRecording] = useState(null)

  useEffect(() => {
    //Declares the recorder object and stores it inside of ref
    recorder.current = new MicRecorder({ bitRate: 128 })
  }, [])

  const startRecording = () => {
    // Check if recording isn't blocked by browser
    recorder.current.start().then(() => {
      setIsRecording(true)
    })
  }

  const stopRecording = () => {
    recorder.current
      .stop()
      .getMp3()
      .then(([buffer, blob]) => {
        const file = new File(buffer, "audio.mp3", {
          type: blob.type,
          lastModified: Date.now(),
        })
        const newBlobUrl = URL.createObjectURL(blob)
        setBlobUrl(newBlobUrl)
        setIsRecording(false)
        setAudioFile(file)
      })
      .catch((e) => console.log(e))
  }

  return (
    <div>
      <h1>React Speech Recognition App</h1>
      <audio ref={audioPlayer} src={blobURL} controls='controls' />
      <div>
        <button disabled={isRecording} onClick={startRecording}>
          START
        </button>
        <button disabled={!isRecording} onClick={stopRecording}>
          STOP
        </button>
        <button>SUBMIT</button>
      </div>
    </div>
  )
}

export default App 
```

è¿™å°†æ˜¯ä¸€ä¸ªå£ï¼Œä½†å°½é‡ç•™åœ¨æˆ‘èº«è¾¹ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬åˆå§‹åŒ–å‡ ä¸ªçŠ¶æ€å˜é‡ï¼Œå¦‚æœä½ ä»¥å‰ä½¿ç”¨è¿‡ [React é’©å­](https://reactjs.org/docs/hooks-intro.html)ï¼Œä½ åº”è¯¥ä¼šå¾ˆç†Ÿæ‚‰ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ©ç”¨ [useEffect](https://reactjs.org/docs/hooks-effect.html) æ¥å£°æ˜è®°å½•å™¨å¯¹è±¡ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ [useRef](https://reactjs.org/docs/hooks-reference.html#useref) å‡½æ•°ä¸­ã€‚

ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è¿™æ ·åšï¼Ÿå› ä¸º`useRef`å…è®¸æˆ‘ä»¬åœ¨å…¶`.current`å±æ€§ä¸­å­˜å‚¨ä¸€ä¸ªå¯å˜å€¼ã€‚è¿™æ„å‘³ç€å³ä½¿åœ¨é‡æ–°å‘ˆç° DOM ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿè®¿é—®è¯¥å±æ€§ã€‚

ç„¶åæˆ‘ä»¬å£°æ˜`startRecording`å‡½æ•°ï¼Œå®ƒè¯¢é—®æˆ‘ä»¬æ˜¯å¦å…è®¸åº”ç”¨ç¨‹åºé€šè¿‡æŒ‰ä¸‹**å¼€å§‹**æŒ‰é’®**æ¥è®¿é—®æˆ‘ä»¬çš„éº¦å…‹é£**ã€‚ç„¶åæˆ‘ä»¬å°†`isRecording`çŠ¶æ€è®¾ç½®ä¸º`true`ã€‚

æœ€åï¼Œæˆ‘ä»¬åˆå§‹åŒ–`stopRecording`å‡½æ•°ï¼Œè¿™é‡Œæœ‰ä¸€å †äº‹æƒ…åœ¨è¿›è¡Œã€‚

æŒ‰ä¸‹**åœæ­¢**æŒ‰é’®ï¼Œæˆ‘ä»¬è°ƒç”¨ä¸€å †**éº¦å…‹é£å½•éŸ³åˆ° mp3 çš„**æ–¹æ³•ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„é‡è¦éƒ¨åˆ†æ˜¯ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ **mp3 æ–‡ä»¶**ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨æˆ‘ä»¬çš„`audioFile`çŠ¶æ€å˜é‡ä¸­ã€‚

æˆ‘ä»¬è¿˜è®¾ç½®äº†`blobUrl`ï¼Œè¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨æˆ‘ä»¬çš„ HTML æ’­æ”¾å™¨æ’­æ”¾æˆ‘ä»¬å½•åˆ¶çš„`audioFile`ã€‚æˆ‘çŸ¥é“è¿™æ˜¯å¾ˆå¤šï¼Œä½†ä¸€æ—¦ä½ å¼€å§‹ç©å®ƒï¼Œå®ƒæ˜¯æœ‰æ„ä¹‰çš„ã€‚

## æ­¥éª¤ 5 -éº¦å…‹é£æ£€æŸ¥ğŸ¤

ç°åœ¨è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç åˆ°ç›®å‰ä¸ºæ­¢æ˜¯å¦æœ‰æ•ˆï¼ç‚¹å‡»**å¼€å§‹**æŒ‰é’®ï¼Œå…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨æ‚¨çš„éº¦å…‹é£ã€‚ä¸€æ—¦å®Œæˆï¼Œå”±ä½ æœ€å–œæ¬¢çš„æ­Œæ›²ï¼Œå¹¶ç‚¹å‡»**åœæ­¢**ã€‚ä½ ç°åœ¨åº”è¯¥å¯ä»¥é€šè¿‡æŒ‰ä¸‹éŸ³é¢‘æ’­æ”¾å™¨ä¸Šçš„â–¶ï¸æŒ‰é’®æ¥é‡æ–°æ’­æ”¾ä½ çš„ç¾å¦™æ­Œæ›²äº†ã€‚

è®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹ *audioFile* å¯¹è±¡å®é™…ä¸Šæ˜¯ä»€ä¹ˆæ ·å­ã€‚

![Untitled](../Images/d0053ea7a8196cd16b3d9ca8628e2bdb.png)

å¦‚ä½ æ‰€è§ï¼Œé‡Œé¢æœ‰ä¸€å †ä¿¡æ¯ã€‚

è¿™æ˜¯æˆ‘ä»¬å°†è¦ä¸Šä¼ åˆ° AssemblyAI çš„å®é™…æ–‡ä»¶ï¼Œç¨åè¿›è¡Œè½¬å½•ã€‚è¯·ç†è§£`blobURL`æ˜¯å¯¹è¿™ä¸ªæ–‡ä»¶çš„**å¼•ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ HTML éŸ³é¢‘æ’­æ”¾å™¨æ¥æ’­æ”¾å®ƒï¼Œè€Œ`audioFile`æ˜¯**å®é™…çš„** audio.mp3 æ–‡ä»¶ã€‚**

å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•å½•åˆ¶éŸ³é¢‘ï¼Œä¹ŸçŸ¥é“äº†éŸ³é¢‘æ–‡ä»¶å­˜å‚¨åœ¨å“ªé‡Œï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹è®¾ç½®è½¬å½•äº†ã€‚

## æ­¥éª¤ 6 -å¯åŠ¨ AssemblyAI API è¿æ¥

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ [AssemblyAI](https://app.assemblyai.com/signup) åˆ›å»ºä¸€ä¸ªå¸æˆ·ã€‚ä¸€æ—¦å®Œæˆï¼Œå‰å¾€ä½ çš„[ä»ªè¡¨ç›˜](https://app.assemblyai.com/)æ‹¿èµ·ä½ çš„ API å¯†åŒ™ã€‚

[Get your API key](https://app.assemblyai.com/signup)![Untitled](../Images/0d8c9a536171c6abb25daaeacc89cd36.png)

**é‡è¦æç¤º:**åƒä¸‡ä¸è¦å’Œä»»ä½•äººåˆ†äº«è¿™ä¸ª API å¯†åŒ™ï¼Œä¹Ÿä¸è¦æŠŠå®ƒæäº¤ç»™ä½ çš„ Github è´¦æˆ·ï¼(ç¨åå°†è¯¦ç»†ä»‹ç»)

### æ­£åœ¨å‘ AssemblyAI éªŒè¯

ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨æˆ‘ä»¬çš„ React è¯­éŸ³è¯†åˆ«åº”ç”¨ç¨‹åºä¸ AssemblyAI è¿›è¡Œé€šä¿¡ï¼Œæˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä½¿ç”¨ AssemblyAI çš„ API è¿›è¡Œèº«ä»½éªŒè¯ã€‚ä½ å¯ä»¥åœ¨[æ–‡æ¡£](https://docs.assemblyai.com/walkthroughs#authentication)ä¸­æŸ¥æ‰¾ï¼Œé‡Œé¢æ¶µç›–äº†å‡ ç§è¯­è¨€ã€‚

ä¸ºäº†èƒ½å¤Ÿä¸ AssemblyAI API å¯¹è¯ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿**æ€»æ˜¯åœ¨è¯·æ±‚å¤´**ä¸­åŒ…å«æˆ‘ä»¬çš„ API é”®ã€‚å› ä¸ºæˆ‘ä»¬æƒ³åšæŒ DRY åŸåˆ™ï¼Œæ‰€ä»¥æˆ‘ä»¬ç®€å•åœ°ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯ä¸€éåˆä¸€éåœ°è¾“å…¥å®ƒã€‚

ç¡®ä¿**ç”¨æ‚¨çš„**å®é™… API å¯†é’¥**æ›¿æ¢â€œyour apikeyâ€**ã€‚å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªå˜é‡**æ”¾åœ¨äº†ç»„ä»¶çš„**ä¹‹å¤–ã€‚è¿™ä¸`useEffect()`å¦‚ä½•å·¥ä½œæœ‰å…³ã€‚

```
import MicRecorder from "mic-recorder-to-mp3"
import { useEffect, useState, useRef } from "react"
import axios from "axios"

// Set AssemblyAI Axios Header
   const assembly = axios.create({
    baseURL: "https://api.assemblyai.com/v2",
    headers: {
      authorization: "YourAPIKey",
      "content-type": "application/json",
      "transfer-encoding": "chunked",
    },
  })

const App = () => {
  // Mic-Recorder-To-MP3
  const recorder = useRef(null) //Recorder
  const audioPlayer = useRef(null) //Ref for the HTML Audio Tag
  const [blobURL, setBlobUrl] = useState(null)
  const [audioFile, setAudioFile] = useState(null)
  const [isRecording, setIsRecording] = useState(null)

  useEffect(() => {
    //Declares the recorder object and stores it inside of ref
    recorder.current = new MicRecorder({ bitRate: 128 })
  }, [])

  const startRecording = () => {
    // Check if recording isn't blocked by browser
    recorder.current.start().then(() => {
      setIsRecording(true)
    })
  }

  const stopRecording = () => {
    recorder.current
      .stop()
      .getMp3()
      .then(([buffer, blob]) => {
        const file = new File(buffer, "audio.mp3", {
          type: blob.type,
          lastModified: Date.now(),
        })
        const newBlobUrl = URL.createObjectURL(blob)
        setBlobUrl(newBlobUrl)
        setIsRecording(false)
        setAudioFile(file)
      })
      .catch((e) => console.log(e))
  }

  // AssemblyAI API

  return (
    <div>
      <h1>React Speech Recognition App</h1>
      <audio ref={audioPlayer} src={blobURL} controls='controls' />
      <div>
        <button disabled={isRecording} onClick={startRecording}>
          START
        </button>
        <button disabled={!isRecording} onClick={stopRecording}>
          STOP
        </button>
        <button>SUBMIT</button>
      </div>
    </div>
  )
}

export default App 
```

ä¸ºäº†æµ‹è¯•è®¤è¯æ˜¯å¦æœ‰æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨è¿™ä¸ª[ä¾‹å­](https://docs.assemblyai.com/walkthroughs#submitting-files-for-transcription)è¿›è¡Œæµ‹è¯•ã€‚åªéœ€å°†è¿™æ®µä»£ç ç²˜è´´åˆ°æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ç¨‹åºé›†å˜é‡çš„ä¸‹æ–¹ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
 ...
// Set AssemblyAI Axios Header
   const assembly = axios.create({
    baseURL: "https://api.assemblyai.com/v2",
    headers: {
      authorization: "YourAPIKey",
      "content-type": "application/json",
      "transfer-encoding": "chunked",
    },
  })

assembly
    .post("/transcript", {
        audio_url: "https://bit.ly/3yxKEIY"
    })
    .then((res) => console.log(res.data))
    .catch((err) => console.error(err))
... 
```

ç°åœ¨åˆ·æ–°æµè§ˆå™¨é¡µé¢(åº”ç”¨ç¨‹åºè¿è¡Œçš„åœ°æ–¹)å¹¶æ£€æŸ¥å¼€å‘äººå‘˜æ§åˆ¶å°(F12)ã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å“åº”:

![Untitled](../Images/7a36dd867ad49bb99431104bfd6c104e.png)

è¿™ä¸ªå“åº”åŒ…æ‹¬æˆ‘ä»¬åœ¨ä¸€ç§’é’Ÿå†…éœ€è¦çš„ä¸¤ä¸ªé‡è¦çš„ä¸œè¥¿ï¼Œå³`id`å’Œ`status`ã€‚

å¾ˆå¥½ã€‚èº«ä»½éªŒè¯æœ‰æ•ˆï¼Œæ‚¨å¯ä»¥ç»§ç»­å¹¶å†æ¬¡åˆ é™¤æµ‹è¯•ä»£ç ã€‚

## æ­¥éª¤ 7 -ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶å¹¶æ£€ç´¢ä¸Šä¼  URL

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ åˆ° AssemblyAI API è¿›è¡Œè½¬å½•ã€‚ä¸€æ—¦ä¸Šä¼ ï¼Œæˆ‘ä»¬ä¼šæ”¶åˆ°ä¸€ä¸ªåŒ…å«ä¸Šä¼  URL çš„å“åº”ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ª URL å­˜å‚¨åœ¨ä¸€ä¸ªçŠ¶æ€å˜é‡ä¸­ã€‚

```
..
const stopRecording = () => {
    recorder.current
      .stop()
      .getMp3()
      .then(([buffer, blob]) => {
        const file = new File(buffer, "audio.mp3", {
          type: blob.type,
          lastModified: Date.now(),
        })
        const newBlobUrl = URL.createObjectURL(blob)
        setBlobUrl(newBlobUrl)
        setIsRecording(false)
        setAudioFile(file)
      })
      .catch((e) => console.log(e))
  }

  // AssemblyAI API

  // State variables
  const [uploadURL, setUploadURL] = useState("")
... 
```

ä¸€æ—¦æˆ‘ä»¬æœ‰äº†è¿™ä¸ª URLï¼Œä¸€æ—¦åˆ›å»ºäº†ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨`useEffect`å‘ API **å‘å‡ºä¸€ä¸ª **POST è¯·æ±‚**ã€‚æˆ‘ä»¬`console.log`çœ‹çœ‹ç»“æœæ˜¯å¦æœ‰æ•ˆã€‚**

```
...
// AssemblyAI API

  // State variables
  const [uploadURL, setUploadURL] = useState("")

  // Upload the Audio File and retrieve the Upload URL
  useEffect(() => {
    if (audioFile) {
      assembly
        .post("/upload", audioFile)
        .then((res) => setUploadURL(res.data.upload_url))
        .catch((err) => console.error(err))
    }
  }, [audioFile])

  console.log(uploadURL)
... 
```

ä¸€æ—¦ä½ å®ç°äº†è¿™äº›ä»£ç ï¼Œ**åˆ·æ–°ä½ çš„é¡µé¢**ï¼Œå½•åˆ¶ä¸€ä¸ªå°çš„éŸ³é¢‘æ–‡ä»¶å¹¶æŸ¥çœ‹æ§åˆ¶å°çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ç‚¹å‡»**åœæ­¢**æŒ‰é’®å‡ ç§’é’Ÿåï¼Œæ‚¨åº”è¯¥ä¼šæ”¶åˆ°ä¸€ä¸ªå“åº”ï¼ŒåŒ…æ‹¬æ‚¨çš„**ä¸Šä¼  URL** ï¼Œå®ƒç°åœ¨å­˜å‚¨åœ¨`uploadURL`ä¸­ã€‚

![Untitled](../Images/1e212ffba479ee9d326987bbf1e79bbc.png)

æ˜ç™½äº†å—ï¼Ÿé…·æ¯™äº†ã€‚æˆ‘ä»¬ç»§ç»­å§ã€‚

å®‰è£…è¯´æ˜

åœ¨ useEffect é’©å­ä¸­åŒ…å«[audioFile]çš„ä¾èµ–æ•°ç»„ç¡®ä¿äº†åªæœ‰åœ¨ audioFile çŠ¶æ€æ”¹å˜æ—¶(åœ¨åˆ›å»ºéŸ³é¢‘æ–‡ä»¶ä¹‹å)æ‰ä¼šå‘å‡º POST è¯·æ±‚ã€‚

## æ­¥éª¤ 8 -æäº¤éŸ³é¢‘æ–‡ä»¶è¿›è¡Œè½¬å½•

ç°åœ¨æˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„`uploadURL`ä½œä¸º POST è¯·æ±‚å‘é€ç»™ APIï¼Œä»¥å¼€å§‹è½¬å½•è¿‡ç¨‹ã€‚ä¸ºæ­¤ï¼Œç°åœ¨è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç®€å•çš„æŒ‰é’®æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºæ›´å¤šçš„çŠ¶æ€å˜é‡ã€‚æˆ‘ä»¬çš„æ•´ä¸ªä»£ç ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ã€‚

```
import MicRecorder from "mic-recorder-to-mp3"
import { useEffect, useState, useRef } from "react"
import axios from "axios"

  // Set AssemblyAI Axios Header
  const assembly = axios.create({
    baseURL: "https://api.assemblyai.com/v2",
    headers: {
      authorization: "YourAPIKey",
      "content-type": "application/json",
      "transfer-encoding": "chunked",
    },
  })

const App = () => {
  // Mic-Recorder-To-MP3
  const recorder = useRef(null) //Recorder
  const audioPlayer = useRef(null) //Ref for the HTML Audio Tag
  const [blobURL, setBlobUrl] = useState(null)
  const [audioFile, setAudioFile] = useState(null)
  const [isRecording, setIsRecording] = useState(null)

  useEffect(() => {
    //Declares the recorder object and stores it inside of ref
    recorder.current = new MicRecorder({ bitRate: 128 })
  }, [])

  const startRecording = () => {
    // Check if recording isn't blocked by browser
    recorder.current.start().then(() => {
      setIsRecording(true)
    })
  }

  const stopRecording = () => {
    recorder.current
      .stop()
      .getMp3()
      .then(([buffer, blob]) => {
        const file = new File(buffer, "audio.mp3", {
          type: blob.type,
          lastModified: Date.now(),
        })
        const newBlobUrl = URL.createObjectURL(blob)
        setBlobUrl(newBlobUrl)
        setIsRecording(false)
        setAudioFile(file)
      })
      .catch((e) => console.log(e))
  }

  // AssemblyAI API

  // State variables
  const [uploadURL, setUploadURL] = useState("")
  const [transcriptID, setTranscriptID] = useState("")
  const [transcriptData, setTranscriptData] = useState("")
  const [transcript, setTranscript] = useState("")

  // Upload the Audio File and retrieve the Upload URL
  useEffect(() => {
    if (audioFile) {
      assembly
        .post("/upload", audioFile)
        .then((res) => setUploadURL(res.data.upload_url))
        .catch((err) => console.error(err))
    }
  }, [audioFile])

  // Submit the Upload URL to AssemblyAI and retrieve the Transcript ID
  const submitTranscriptionHandler = () => {
    assembly
      .post("/transcript", {
        audio_url: uploadURL,
      })
      .then((res) => {
        setTranscriptID(res.data.id)
      })
      .catch((err) => console.error(err))
  }

	console.log(transcriptID)

  return (
    <div>
      <h1>React Speech Recognition App</h1>
      <audio ref={audioPlayer} src={blobURL} controls='controls' />
      <div>
        <button disabled={isRecording} onClick={startRecording}>
          START
        </button>
        <button disabled={!isRecording} onClick={stopRecording}>
          STOP
        </button>
        <button onClick={submitTranscriptionHandler}>SUBMIT</button>
      </div>
    </div>
  )
}

export default App 
```

å¥½å§ï¼Œè®©æˆ‘ä»¬è¯•ä¸€è¯•ã€‚åˆ·æ–°é¡µé¢ï¼Œå†æ¬¡å½•åˆ¶éŸ³é¢‘æ–‡ä»¶ï¼ŒæŒ‰ä¸‹**åœæ­¢**åï¼ŒæŒ‰ä¸‹**æäº¤**æŒ‰é’®ã€‚æäº¤å®Œæˆåï¼Œæ‚¨åº”è¯¥ä¼šåœ¨æ§åˆ¶å°ä¸­æ”¶åˆ°æ‚¨çš„`transcriptID`ã€‚

### æ£€æŸ¥è½¬å½•çŠ¶æ€

ä¸ºäº†èƒ½å¤Ÿçœ‹åˆ°æˆ‘ä»¬çš„æ–‡ä»¶æ˜¯å¦å®Œæˆäº†è½¬å½•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹æ³•ä¹‹ä¸€ã€‚**ç¬¬ä¸€ä¸ª**ä½¿ç”¨çš„æ˜¯[ç½‘é¡µé’©å­](https://docs.assemblyai.com/walkthroughs#using-webhooks)ï¼Œ**ç¬¬äºŒä¸ª**ä½¿ç”¨çš„æ˜¯ç®€å•å‡½æ•°ã€‚æˆ‘ä»¬åœ¨æœ¬æ•™ç¨‹ä¸­é‡‡ç”¨åè€…ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºæˆ‘ä»¬ç†è§£æ¯ä¸€æ­¥ã€‚

åœ¨ä¸‹é¢æ·»åŠ `checkStatusHandler`å¼‚æ­¥å‡½æ•°ã€‚å¦å¤–ï¼Œå°†`console.log`æ”¹ä¸ºæ—¥å¿—`transcriptData`ï¼Œå¹¶åœ¨ HTML ä»£ç ä¸­æ·»åŠ **æ£€æŸ¥çŠ¶æ€**æŒ‰é’®ã€‚

```
...
  // Submit the Upload URL to AssemblyAI and retrieve the Transcript ID
  const submitTranscriptionHandler = () => {
    assembly
      .post("/transcript", {
        audio_url: uploadURL,
      })
      .then((res) => {
        setTranscriptID(res.data.id)
      })
      .catch((err) => console.error(err))
  }

  // Check the status of the Transcript and retrieve the Transcript Data
  const checkStatusHandler = async () => {
    try {
      await assembly.get(`/transcript/${transcriptID}`).then((res) => {
        setTranscriptData(res.data)
		setTranscript(transcriptData.text)
      })
    } catch (err) {
      console.error(err)
    }
  }

  console.log(transcriptData)

  return (
    <div>
      <h1>React Speech Recognition App</h1>
      <audio ref={audioPlayer} src={blobURL} controls='controls' />
      <div>
        <button disabled={isRecording} onClick={startRecording}>
          START
        </button>
        <button disabled={!isRecording} onClick={stopRecording}>
          STOP
        </button>
        <button onClick={submitTranscriptionHandler}>SUBMIT</button>
        <button onClick={checkStatusHandler}>CHECK STATUS</button>
      </div>
    </div>
  )
}

export default App 
```

å¥½å§ï¼Œå†æ¥ä¸€æ¬¡ã€‚åˆ·æ–°ï¼Œè®°å½•ï¼Œç‚¹å‡»**åœæ­¢**ï¼Œç‚¹å‡»**æäº¤**ï¼Œç„¶åç‚¹å‡»**æ£€æŸ¥çŠ¶æ€**ã€‚

æ‚¨åº”è¯¥ä¼šæ”¶åˆ°å“åº”ï¼Œå‘Šè¯‰æ‚¨å®ƒä»åœ¨å¤„ç†ä¸­ã€‚

![Untitled](../Images/9809d884dfa832d6df3810546d18bb06.png)

ç°åœ¨ï¼Œæˆ‘ä»¬å¦‚ä½•æ£€æŸ¥çŠ¶æ€æ˜¯å¦æ›´æ”¹ä¸ºâ€œå·²å®Œæˆâ€ï¼Ÿé€šè¿‡å†æ¬¡ç‚¹å‡»**æ£€æŸ¥çŠ¶æ€**æŒ‰é’®ã€‚åˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šè‡ªåŠ¨å®Œæˆã€‚

å‡ ç§’é’Ÿåï¼Œè½¬å½•å®Œæˆã€‚

![Untitled](../Images/e3cc81e7eb9ad1bc11c808adcc8d251f.png)

å¦‚æœæ‚¨æ‰“å¼€æ­¤å¯¹è±¡å¹¶å‘ä¸‹æ»šåŠ¨ï¼Œç›´åˆ°æ‰¾åˆ°`text`ï¼Œæ‚¨å°†çœ‹åˆ°æ‚¨å¯¹ç€éº¦å…‹é£è¯´å‡ºçš„æ–‡æœ¬ã€‚

![Untitled](../Images/91575dc896c8883cb3c59c7db5f65e73.png)

å› ä¸ºæˆ‘ä»¬å°†è¿™ä¸ªå“åº”å­˜å‚¨åœ¨æˆ‘ä»¬çš„`transcriptData`å˜é‡ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨å¯ä»¥å®Œå…¨è®¿é—®å®ƒã€‚

### æ˜¾ç¤ºæˆç»©å•æ•°æ®

ç°åœ¨ä½ ä¹Ÿå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å°†`transcriptData.text`å­˜å‚¨åœ¨`transcript`å˜é‡ä¸­ã€‚è¿™æ„å‘³ç€ä¸€æ—¦è½¬å½•å®Œæˆï¼Œè½¬å½•å˜é‡å°†ä¿å­˜æˆ‘ä»¬è½¬å½•çš„æ–‡æœ¬ã€‚æˆ‘ä»¬ç°åœ¨èƒ½å¤Ÿä½¿ç”¨æ¡ä»¶å‘ˆç°æ¥æ˜¾ç¤ºè¯¥æ–‡æœ¬ã€‚

```
...
return (
    <div>
      <h1>React Speech Recognition App</h1>
      <audio ref={audioPlayer} src={blobURL} controls='controls' />
      <div>
        <button disabled={isRecording} onClick={startRecording}>
          START
        </button>
        <button disabled={!isRecording} onClick={stopRecording}>
          STOP
        </button>
        <button onClick={submitTranscriptionHandler}>SUBMIT</button>
        <button onClick={checkStatusHandler}>CHECK STATUS</button>
      </div>
      {transcriptData.status === "completed" ? (
        <p>{transcript}</p>
      ) : (
        <p>{transcriptData.status}</p>
      )}
    </div>
  )
... 
```

è¿™å°±æ˜¯ä¸€åˆ‡éƒ½åšå®Œåçš„ç»“æœã€‚

![Untitled](../Images/eb1eac2206c0a97ece1668fcefcdf077.png)

**ä¸ºäº†å¾—åˆ°æœ€ç»ˆç»“æœ**ï¼Œæˆ‘ä»¬éœ€è¦åå¤æŒ‰ä¸‹**æ£€æŸ¥çŠ¶æ€**æŒ‰é’®ï¼Œç›´åˆ°**éŸ³é¢‘æ–‡ä»¶å¤„ç†å®Œæ¯•**ã€‚å¾ˆé«˜å…´ï¼Œæœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

## æ­¥éª¤ 9 -è‡ªåŠ¨åŒ–æµç¨‹

ç°åœ¨ä»£ç ä¼šæœ‰å¾ˆå¤§çš„å˜åŒ–ï¼Œä½†æœ¬è´¨ä¸Šï¼Œå®ƒä¼šä¿æŒä¸å˜ã€‚æˆ‘å‘ä½ è§£é‡Šå‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ã€‚

```
import MicRecorder from "mic-recorder-to-mp3"
import { useEffect, useState, useRef } from "react"
import axios from "axios"

  // Set AssemblyAI Axios Header
  const assembly = axios.create({
    baseURL: "https://api.assemblyai.com/v2",
    headers: {
      authorization: "YourAPIKey",
      "content-type": "application/json",
      "transfer-encoding": "chunked",
    },
  })

const App = () => {
  // Mic-Recorder-To-MP3
  const recorder = useRef(null) //Recorder
  const audioPlayer = useRef(null) //Ref for the HTML Audio Tag
  const [blobURL, setBlobUrl] = useState(null)
  const [audioFile, setAudioFile] = useState(null)
  const [isRecording, setIsRecording] = useState(null)

  useEffect(() => {
    //Declares the recorder object and stores it inside of ref
    recorder.current = new MicRecorder({ bitRate: 128 })
  }, [])

  const startRecording = () => {
    // Check if recording isn't blocked by browser
    recorder.current.start().then(() => {
      setIsRecording(true)
    })
  }

  const stopRecording = () => {
    recorder.current
      .stop()
      .getMp3()
      .then(([buffer, blob]) => {
        const file = new File(buffer, "audio.mp3", {
          type: blob.type,
          lastModified: Date.now(),
        })
        const newBlobUrl = URL.createObjectURL(blob)
        setBlobUrl(newBlobUrl)
        setIsRecording(false)
        setAudioFile(file)
      })
      .catch((e) => console.log(e))
  }

  // AssemblyAI API

  // State variables
  const [uploadURL, setUploadURL] = useState("")
  const [transcriptID, setTranscriptID] = useState("")
  const [transcriptData, setTranscriptData] = useState("")
  const [transcript, setTranscript] = useState("")
  const [isLoading, setIsLoading] = useState(false)

  // Upload the Audio File and retrieve the Upload URL
  useEffect(() => {
    if (audioFile) {
      assembly
        .post("/upload", audioFile)
        .then((res) => setUploadURL(res.data.upload_url))
        .catch((err) => console.error(err))
    }
  }, [audioFile])

  // Submit the Upload URL to AssemblyAI and retrieve the Transcript ID
  const submitTranscriptionHandler = () => {
    assembly
      .post("/transcript", {
        audio_url: uploadURL,
      })
      .then((res) => {
        setTranscriptID(res.data.id)

        checkStatusHandler()
      })
      .catch((err) => console.error(err))
  }

  // Check the status of the Transcript
  const checkStatusHandler = async () => {
    setIsLoading(true)
    try {
      await assembly.get(`/transcript/${transcriptID}`).then((res) => {
        setTranscriptData(res.data)
      })
    } catch (err) {
      console.error(err)
    }
  }

  // Periodically check the status of the Transcript
  useEffect(() => {
    const interval = setInterval(() => {
      if (transcriptData.status !== "completed" && isLoading) {
        checkStatusHandler()
      } else {
        setIsLoading(false)
        setTranscript(transcriptData.text)

        clearInterval(interval)
      }
    }, 1000)
    return () => clearInterval(interval)
  },)

  return (
    <div>
      <h1>React Speech Recognition App</h1>
      <audio ref={audioPlayer} src={blobURL} controls='controls' />
      <div>
        <button disabled={isRecording} onClick={startRecording}>
          START
        </button>
        <button disabled={!isRecording} onClick={stopRecording}>
          STOP
        </button>
        <button onClick={submitTranscriptionHandler}>SUBMIT</button>
      </div>
      {transcriptData.status === "completed" ? (
        <p>{transcript}</p>
      ) : (
        <p>{transcriptData.status}</p>
      )}
    </div>
  )
}

export default App 
```

ä½ ç°åœ¨åº”è¯¥åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å†æ¬¡è¿è¡Œåº”ç”¨ç¨‹åºã€‚ä½ ä¼šçœ‹åˆ°ä½ åªéœ€è¦ç‚¹å‡»**å¼€å§‹**ã€**åœæ­¢**ï¼Œç„¶å**æäº¤**ã€‚ç°åœ¨**å¤„ç†...**å‡ºç°åœ¨å±å¹•ä¸Šã€‚è¿‡äº†ä¸€ä¼šå„¿ï¼Œæˆ‘ä»¬è½¬å½•çš„æ–‡æœ¬å‡ºç°äº†ã€‚è¿™ç§ç¥å¥‡æ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ

é¦–å…ˆï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª`isLoading`çŠ¶æ€å˜é‡æ¥æ£€æŸ¥çŠ¶æ€æ˜¯**â€œå¤„ç†ä¸­â€**è¿˜æ˜¯**â€œå®Œæˆâ€**ã€‚

ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ‰€è°“çš„é—´éš”æ¥å®šæœŸè¿è¡Œæˆ‘ä»¬çš„`checkStatusHandler()`å‡½æ•°ï¼Œä»¥æŸ¥çœ‹çŠ¶æ€æ˜¯å¦å·²ç»å˜ä¸º**â€œå·²å®Œæˆâ€**ã€‚ä¸€æ—¦çŠ¶æ€å˜ä¸ºâ€œå®Œæˆâ€ï¼Œå®ƒå°†`isLoading`è®¾ç½®ä¸º *false* ï¼Œå°†è½¬å½•çš„æ–‡æœ¬æ·»åŠ åˆ°æˆ‘ä»¬çš„`transcript`å˜é‡ä¸­ï¼Œå¹¶ç»“æŸé—´éš”ã€‚

```
 // Periodically check the status of the Transcript
  useEffect(() => {
    const interval = setInterval(() => {
      if (transcriptData.status !== "completed" && isLoading) {
        checkStatusHandler()
      } else {
        setIsLoading(false)
        setTranscript(transcriptData.text)

        clearInterval(interval)
      }
    }, 1000)
    return () => clearInterval(interval)
  }, ) 
```

åŸºæœ¬ä¸Šå°±æ˜¯è¿™æ ·äº†ã€‚åŒæ ·ï¼Œè¿™æ˜¯å®Œå…¨æ²¡æœ‰é£æ ¼çš„æ›´å¥½çš„å¯è§†æ€§ã€‚åœ¨æœ€ç»ˆç‰ˆæœ¬ä¸­ï¼Œå½“çŠ¶æ€ä¸ç­‰äº**â€œå®Œæˆâ€**æ—¶ï¼Œæˆ‘æ·»åŠ äº†ä¸€ä¸ªåŠ è½½å¾®è°ƒå™¨ã€‚

## ç»“è®º

æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼ŒReact è¯­éŸ³è¯†åˆ«èµ·åˆå¯èƒ½ä¼šä»¤äººå›°æƒ‘ï¼Œä½†æ˜¯ä¸€æ—¦æ‚¨ç†è§£äº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå®ƒå°±æ˜¯æ‚¨çš„å­˜å‚¨åº“ä¸­çš„ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ã€‚

æœ‰å¤§é‡çš„é¡¹ç›®æƒ³æ³•å¯ä»¥åˆ©ç”¨è¯­éŸ³è¯†åˆ«çš„èƒ½åŠ›ã€‚çœ‹çœ‹è¿™äº›è§†é¢‘ä¸­çš„ä¸€äº›æƒ³æ³•å§ï¼

1.  [è‡ªåŠ¨æ€»ç»“ä½ çš„è®²åº§](https://www.assemblyai.com/blog/python-project-lecture-summaries/)
2.  [è‡ªåŠ¨å‘å¸ƒä½ è¯´çš„æœ€åä¸€å¥è¯](https://www.youtube.com/watch?v=UTRtdIq2xCs)
3.  [è‡ªåŠ¨å®æ—¶è½¬å½•ç”µè¯é€šè¯](https://www.youtube.com/watch?v=3XmtJgWcOT0&t=2s)